(this["webpackJsonpcovid-vaccine-notifier-v2"]=this["webpackJsonpcovid-vaccine-notifier-v2"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),a=c(6),s=c.n(a),r=(c(14),c(4)),l=c.n(r),o=c(3),d=c(8),j=c(2),b=(c(16),c(17),c(18),c(0));var u=function(e){var t=e.isPopupOpen,c=e.selectedCenter,n=e.closePopup,a=c.sessions;return t?s.a.createPortal(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"overlay"}),Object(b.jsxs)("div",{className:"pop-up",children:[Object(b.jsx)("button",{onClick:n,children:"X"}),Object(b.jsx)("table",{className:"details-table",children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"details-head",children:"Center:"}),Object(b.jsx)("td",{children:c.name})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"details-head",children:"Address:"}),Object(b.jsx)("td",{children:c.address})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"details-head",children:"Pincode:"}),Object(b.jsx)("td",{children:c.pincode})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"details-head",children:"Vaccine:"}),Object(b.jsx)("td",{children:c.sessions[0].vaccine})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"details-head",children:"Fee:"}),"Free"===c.fee_type?Object(b.jsx)("td",{children:"Free"}):Object(b.jsxs)("td",{children:["\u20b9",c.vaccine_fees[0].fee]})]})]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:"All Sessions"}),Object(b.jsxs)("table",{className:"all-sessions-table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Date"}),Object(b.jsx)("th",{children:"Min.Age"}),Object(b.jsx)("th",{children:"Dose 1"}),Object(b.jsx)("th",{children:"Dose 2"})]})}),Object(b.jsx)("tbody",{children:i.a.Children.toArray(a.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:e.min_age_limit}),Object(b.jsx)("td",{children:e.available_capacity_dose1}),Object(b.jsx)("td",{children:e.available_capacity_dose2})]})})))})]})]})]})]}),document.getElementById("modal-root")):null};var h=function(e){var t=e.vaccineCenters,c=Object(n.useState)(!1),a=Object(j.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)(""),d=Object(j.a)(l,2),h=d[0],O=d[1],f=Object(n.useState)(""),x=Object(j.a)(f,2),v=x[0],m=x[1],p=Object(n.useState)([]),g=Object(j.a)(p,2),N=g[0],C=g[1];return Object(n.useEffect)((function(){C("name"===v?Object(o.a)(t).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})):function(e){return e.sort((function(e,t){return new Date(e.sessions[0].date)-new Date(t.sessions[0].date)}))}(Object(o.a)(t)))}),[v,t]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("table",{className:"vaccine-list-table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"col col-1",onClick:function(){m("date")},children:"Date"}),Object(b.jsx)("th",{className:"col col-2",onClick:function(){m("name")},children:"Center"}),Object(b.jsx)("th",{className:"col col-3",children:"Dose 1"}),Object(b.jsx)("th",{className:"col col-4",children:"Dose 2"}),Object(b.jsx)("th",{className:"col col-5",children:"Min.Age"}),Object(b.jsx)("th",{className:"col col-6",children:"Vaccine"}),Object(b.jsx)("th",{className:"col col-7",children:"Type"})]})}),Object(b.jsxs)("tbody",{className:"vaccine-table-body",children:[i.a.Children.toArray(N.map((function(e){return Object(b.jsxs)("tr",{onClick:function(){r(!0),O(e)},children:[Object(b.jsx)("td",{className:"col col-1",children:e.sessions[0].date}),Object(b.jsx)("td",{className:"col col-2",children:Object(b.jsxs)("div",{children:[e.name,",",e.block_name,",",e.pincode]})}),Object(b.jsx)("td",{className:"col col-3",children:e.sessions[0].available_capacity_dose1}),Object(b.jsx)("td",{className:"col col-4",children:e.sessions[0].available_capacity_dose2}),Object(b.jsx)("td",{className:"col col-5",children:e.sessions[0].min_age_limit}),Object(b.jsx)("td",{className:"col col-6",children:e.sessions[0].vaccine}),Object(b.jsx)("td",{className:"col col-7",children:e.fee_type})]})}))),Object(b.jsx)(u,{isPopupOpen:s,selectedCenter:h,closePopup:function(){return r(!1)}})]})]})})},O=function(e){return e<10?"0".concat(e):e},f=function(){var e=new Date,t=O(e.getHours()),c=O(e.getMinutes()),n=O(e.getSeconds());return"".concat(t,":").concat(c,":").concat(n)};c(20);var x=function(e){var t=e.vaccineCenters,c=Object(n.useState)([]),i=Object(j.a)(c,2),a=i[0],s=i[1],r=Object(n.useState)(0),l=Object(j.a)(r,2),d=l[0],u=l[1],O=Object(n.useState)("ALL"),x=Object(j.a)(O,2),v=x[0],m=x[1],p=Object(n.useState)(""),g=Object(j.a)(p,2),N=g[0],C=g[1],y=Object(n.useState)(0),k=Object(j.a)(y,2),w=k[0],_=k[1],F=Object(n.useState)("ALL"),A=Object(j.a)(F,2),L=A[0],S=A[1],D=Object(n.useState)("ALL"),P=Object(j.a)(D,2),E=P[0],I=P[1],V=Object(n.useState)(!1),M=Object(j.a)(V,2),T=M[0],B=M[1];Object(n.useEffect)((function(){var e=function(e,t){if(0===e)return t;var c=new RegExp(e,"g");return t.filter((function(e){return c.exec(e.pincode)?e:null}))}(w,function(e,t){if(""===e)return t;var c=new RegExp(e,"gi");return t.filter((function(e){return c.exec(e.name)?e:null}))}(N,function(e,t){return"ALL"===e?t:t.filter((function(t){return t.sessions[0].vaccine===e?t:null}))}(v,function(e,t){return 0===e?t:t.filter((function(t){return t.sessions[0].min_age_limit===e?t:null}))}(d,function(e,t){return"ALL"===e?t:t.filter((function(t){return t.fee_type===e?t:null}))}(L,function(e,t){return"ALL"===e?t:t.filter((function(t){if("dose1"===e){if(t.sessions[0].available_capacity_dose1>0)return t}else if("dose2"===e&&t.sessions[0].available_capacity_dose2>0)return t;return null}))}(E,Object(o.a)(t)))))));T&&e.length>0&&("Notification"in window?"granted"===Notification.permission?new Notification("Vaccines are available!"):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e&&new Notification("Vaccines are available!")})):alert("This browser does not support desktop notification"),B(!1)),s(e)}),[d,v,N,w,t,T,L,E]);var H=function(e){m(e.target.value)},J=function(e){u(parseInt(e.target.value))},R=function(e){S(e.target.value)},X=function(e){I(e.target.value)};return Object(b.jsxs)("div",{className:"VaccineCenterList",children:[Object(b.jsxs)("div",{className:"filter-container",children:[Object(b.jsxs)("div",{className:"radio-container",children:[Object(b.jsxs)("div",{className:"switch-field",children:[Object(b.jsx)("input",{type:"radio",id:"age-one",name:"age-radio",value:"0",onClick:J,defaultChecked:!0}),Object(b.jsx)("label",{htmlFor:"age-one",children:"All"}),Object(b.jsx)("input",{type:"radio",id:"age-two",name:"age-radio",value:"18",onClick:J}),Object(b.jsx)("label",{htmlFor:"age-two",children:"Age 18+"}),Object(b.jsx)("input",{type:"radio",id:"age-three",name:"age-radio",value:"40",onClick:J}),Object(b.jsx)("label",{htmlFor:"age-three",children:"Age 40+"}),Object(b.jsx)("input",{type:"radio",id:"age-four",name:"age-radio",value:"45",onClick:J}),Object(b.jsx)("label",{htmlFor:"age-four",children:"Age 45+"})]}),Object(b.jsxs)("div",{className:"switch-field",children:[Object(b.jsx)("input",{type:"radio",id:"vaccine-one",name:"vaccine-radio",value:"ALL",onClick:H,defaultChecked:!0}),Object(b.jsx)("label",{htmlFor:"vaccine-one",children:"All"}),Object(b.jsx)("input",{type:"radio",id:"vaccine-two",name:"vaccine-radio",value:"COVISHIELD",onClick:H}),Object(b.jsx)("label",{htmlFor:"vaccine-two",children:"Covishield"}),Object(b.jsx)("input",{type:"radio",id:"vaccine-three",name:"vaccine-radio",value:"COVAXIN",onClick:H}),Object(b.jsx)("label",{htmlFor:"vaccine-three",children:"Covaxin"}),Object(b.jsx)("input",{type:"radio",id:"vaccine-four",name:"vaccine-radio",value:"SPUTNIK V",onClick:H}),Object(b.jsx)("label",{htmlFor:"vaccine-four",children:"Sputnik"})]}),Object(b.jsxs)("div",{className:"switch-field",children:[Object(b.jsx)("input",{type:"radio",id:"fee-one",name:"fee-radio",value:"ALL",onClick:R,defaultChecked:!0}),Object(b.jsx)("label",{htmlFor:"fee-one",children:"All"}),Object(b.jsx)("input",{type:"radio",id:"fee-two",name:"fee-radio",value:"Free",onClick:R}),Object(b.jsx)("label",{htmlFor:"fee-two",children:"Free"}),Object(b.jsx)("input",{type:"radio",id:"fee-three",name:"fee-radio",value:"Paid",onClick:R}),Object(b.jsx)("label",{htmlFor:"fee-three",children:"Paid"})]}),Object(b.jsxs)("div",{className:"switch-field",children:[Object(b.jsx)("input",{type:"radio",id:"dose-one",name:"dose-radio",value:"ALL",onClick:X,defaultChecked:!0}),Object(b.jsx)("label",{htmlFor:"dose-one",children:"All"}),Object(b.jsx)("input",{type:"radio",id:"dose-two",name:"dose-radio",value:"dose1",onClick:X}),Object(b.jsx)("label",{htmlFor:"dose-two",children:"Dose1"}),Object(b.jsx)("input",{type:"radio",id:"dose-three",name:"dose-radio",value:"dose2",onClick:X}),Object(b.jsx)("label",{htmlFor:"dose-three",children:"Dose2"})]})]}),Object(b.jsxs)("div",{className:"secondary-filter-container",children:[Object(b.jsxs)("div",{className:"input-filter-container",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"name-filter",children:"Name"}),Object(b.jsx)("input",{type:"text",id:"name-filter",onChange:function(e){C(e.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"pin-filter",children:"Pincode"}),Object(b.jsx)("input",{type:"number",id:"pin-filter",onChange:function(e){_(e.target.value)}})]})]}),Object(b.jsxs)("div",{children:["Last refresh : ",f()]})]})]}),Object(b.jsx)("div",{className:"vaccine-list-table",children:0!==a.length?Object(b.jsx)(h,{vaccineCenters:a}):Object(b.jsxs)("div",{className:"notification-prompt",children:[Object(b.jsx)("h4",{children:"No vaccine centers available!"}),Object(b.jsx)("button",{disabled:!!T,onClick:function(){B(!0)},children:"Notify Me !"})]})})]})},v=function(e){var t=[];return e.forEach((function(e){var c=m(Object(o.a)(e.sessions));e.sessions=c,t.push(e)})),t.filter((function(e){return 0!==e.sessions.length}))},m=function(e){return e.filter((function(e){return e.available_capacity>0}))};var p=function(e){var t=e.getDistrict,c=e.selectedDistrict,a=Object(n.useState)([]),s=Object(j.a)(a,2),r=s[0],o=s[1],u=Object(n.useState)(!1),h=Object(j.a)(u,2),O=h[0],f=h[1],x=function(){var e=Object(d.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/17");case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,o(c.districts);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(b.jsxs)("header",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Covid Vaccine Notifier"}),Object(b.jsxs)("div",{className:"dropdown",children:[Object(b.jsx)("button",{onClick:function(){f(!O)},className:"dropbtn",children:c.district_name}),Object(b.jsx)("div",{id:"myDropdown",className:"dropdown-content",style:{display:O?"block":"none"},children:i.a.Children.toArray(r.map((function(e,c){return Object(b.jsx)("div",{onClick:function(e){!function(e,c){t(r[c]),f(!1)}(0,c)},children:e.district_name})})))})]})]}),Object(b.jsx)("div",{className:"cowin-link",children:Object(b.jsx)("button",{children:Object(b.jsx)("a",{href:"https://selfregistration.cowin.gov.in/",children:"Co-WIN"})})})]})};var g=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)({district_id:307,district_name:"Ernakulam"}),s=Object(j.a)(a,2),r=s[0],u=s[1],h=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{mode:"cors"});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=v(Object(o.a)(n.centers)),i(Object(o.a)(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=r.district_id,t=function(){var e=new Date,t=O(e.getDate()),c=O(e.getMonth()+1),n=O(e.getFullYear());return"".concat(t,"-").concat(c,"-").concat(n)}();return"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(e,"&date=").concat(t)};return Object(n.useEffect)((function(){h(f());var e=setInterval((function(){h(f())}),1e4);return function(){clearInterval(e)}}),[r]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(p,{getDistrict:function(e){u(e)},selectedDistrict:r}),Object(b.jsx)(x,{vaccineCenters:c})]})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root")),N()}],[[21,1,2]]]);
//# sourceMappingURL=main.6c6862c5.chunk.js.map